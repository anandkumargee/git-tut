utelity function for version 3